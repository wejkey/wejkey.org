<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wejkey - mclr</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/184445277?v=4">
</head>
<body>
    <h2>mclr = minecraft colors</h2>
    <div class="color-section">Basic</div>
    <div class="color-panel" id="basicColors"></div>
    <div class="color-section">Light</div>
    <div class="color-panel" id="lightColors"></div>
    <div class="color-section">Styles</div>
    <div class="color-panel" id="styles"></div>
    <textarea id="inputBox" placeholder="Now type................. about your day, for exampleðŸ‘"></textarea>
    <div class="output" id="outputBox"></div>
    <div class="alignment-buttons">
        <button class="left-align" onclick="setAlignment('left')">Left</button>
        <button class="center-align" onclick="setAlignment('center')">Center</button>
    </div>
    <small>First color, then stlyle</small>
    <script>
        const colorMap = {
            '&0': '#000000', '&1': '#0000AA', '&2': '#00AA00', '&3': '#00AAAA', '&4': '#AA0000',
            '&5': '#AA00AA', '&6': '#FFAA00', '&7': '#AAAAAA', '&8': '#555555', '&9': '#5555FF',
            '&a': '#55FF55', '&b': '#55FFFF', '&c': '#FF5555', '&d': '#FF55FF', '&e': '#FFFF55', '&f': '#FFFFFF'
        };
        const formatMap = { '&l': 'bold', '&n': 'underline', '&o': 'italic', '&m': 'line-through', '&r': 'reset' };
        const basicColorsContainer = document.getElementById('basicColors');
        const lightColorsContainer = document.getElementById('lightColors');
        const stylesContainer = document.getElementById('styles');
        const outputBox = document.getElementById('outputBox');
        const inputBox = document.getElementById('inputBox');
        
        Object.entries(colorMap).forEach(([code, color]) => {
            const div = document.createElement('div');
            div.className = 'color-code';
            div.textContent = code;
            div.style.backgroundColor = color;
            div.style.color = (['&0', '&8'].includes(code)) ? 'white' : 'black';
            div.onclick = () => insertColorCode(code);
            if (['&a', '&b', '&c', '&d', '&e', '&f'].includes(code)) {
                lightColorsContainer.appendChild(div);
            } else {
                basicColorsContainer.appendChild(div);
            }
        });
        
        Object.entries(formatMap).forEach(([code, style]) => {
            const div = document.createElement('div');
            div.className = 'color-code';
            div.textContent = code;
            div.style.textDecoration = style === 'reset' ? 'none' : style;
            div.style.backgroundColor = style === 'reset' ? '#333' : '#333';
            div.style.color = 'white';
            div.onclick = () => insertColorCode(code);
            stylesContainer.appendChild(div);
        });

        function insertColorCode(code) {
            inputBox.value += code;
            inputBox.focus();  
        }

        inputBox.addEventListener('input', function() {
            let inputText = this.value;
            let outputHTML = '';
            let segments = inputText.split(/(&[0-9a-fA-Flnomr])/g);
            let styles = {};
            
            segments.forEach(seg => {
                if (colorMap[seg]) {
                    styles = { color: colorMap[seg] };
                } else if (formatMap[seg] && styles.color) {
                    styles[formatMap[seg]] = true;
                } else if (seg === '&r') {
                    styles = {};
                } else {
                    let styleString = `color: ${styles.color || 'inherit'}; ` +
                        `${styles.bold ? 'font-weight: bold;' : ''}` +
                        `${styles.underline ? 'text-decoration: underline;' : ''}` +
                        `${styles.italic ? 'font-style: italic;' : ''}` +
                        `${styles['line-through'] ? 'text-decoration: line-through;' : ''}`;
                    outputHTML += `<span style="${styleString}">${seg}</span>`;
                }
            });
            outputBox.innerHTML = outputHTML;
        });
        
        function setAlignment(align) {
            outputBox.style.textAlign = align;
        }
    </script>
</body>
</html>
